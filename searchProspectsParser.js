class searchProspectsParser{getPeopleList(e){let t={people:[],hasUnadded:!1};if("object"!=typeof e){e=e.replace(/&quot;/gi,'"').replace(/&#92;/gi,"\\");try{e=JSON.parse(e)}catch(e){return t}}if(e&&e.included)return t=this.getPeoplesFromMainDataBlock(e.included);var a,r=[];let i=[];for(const l of e.elements)l.results&&(r=(a=this.getPeopleLinks(l.results)).people,i=[...i,...r],t.hasUnadded=a.hasUnadded);return 0<i.length&&(t.people=[...i]),t}getPeopleListV2(e){var t;return(e=function(e){for(var t,a,r=[],i=/<code.+?>([\s\S]+?)<\/code>/gi;t=i.exec(e);)if(t[1])try{(a=JSON.parse(t[1].trim()))&&r.push(a)}catch(e){}return r}(e=e.replace(/&quot;/gi,'"').replace(/&#92;/gi,"\\")))&&0!==e.length?(t=[],t=function(t){for(let e=0;e<t.length;e++){if(t[e].included&&0<t[e].included.length&&t[e].data&&t[e].data.data&&t[e].data.data.searchDashClustersByAll&&t[e].data.data.searchDashClustersByAll.metadata&&"PEOPLE"===t[e].data.data.searchDashClustersByAll.metadata.primaryResultType)return t[e].included;if(t[e].data&&t[e].data.metadata&&t[e].data.metadata.primaryResultType&&"PEOPLE"===t[e].data.metadata.primaryResultType)return t[e].included}}(e),this.getPeoplesFromMainDataBlock(t)):[]}getPeoplesFromMainDataBlock(e){let l=[];var t=function e(t,a,r){for(var i in a)i===t&&-1!==a[i].indexOf(r)?l.push(a):"object"!=typeof a[i]&&"array"!=typeof a[i]||e(t,a[i],r);return l}("entityUrn",e,"urn:li:fsd_entityResultViewModel:(urn:li:fsd_profile:");return t&&0!==t.length?((t=this.getPeopleLinks(t)).people=this.getPeopleLinksExt(t.people,e),t):[]}getPeopleLinks(e){var t,a,r,i=[];let l=!1;for(const n of e)n.title&&n.title.text&&"LinkedIn Member"===n.title.text?l=!0:(t={},n.title&&n.title.text&&(t.name=n.title.text),n.trackingUrn&&(t.source_id=n.trackingUrn.replace("urn:li:member:","")),n.navigationUrl&&(t.source_id_2=decodeURIComponent(findDescrByRegEx(n.navigationUrl,/in\/(.+?)(\/|\?|$)/i))),t.source_id_2&&(t.searchLink=getProspectApiUrl(t.source_id_2)),t.source="linkedIn",n&&n.image&&n.image.attributes[0]&&n.image.attributes[0].detailData&&n.image.attributes[0].detailData.profilePicture&&((a=this.getPictureUrl(n.image.attributes[0].detailData.profilePicture))&&(t.logo=a),t.logo)&&(t.logo=convertHtmlToText(t.logo)),n&&n.image&&n.image.attributes[0]&&n.image.attributes[0].detailDataUnion&&n.image.attributes[0].detailDataUnion.nonEntityProfilePicture&&(a=this.getPictureUrlV2(n.image.attributes[0].detailDataUnion.nonEntityProfilePicture))&&(t.logo=a),n&&n.image&&n.image.attributes[0]&&n.image.attributes[0].detailData&&n.image.attributes[0].detailData.nonEntityProfilePicture&&(r=this.getPictureUrlV2(n.image.attributes[0].detailData.nonEntityProfilePicture))&&(t.logo=r),t.searchLink&&i.push(t));return{people:i,hasUnadded:l}}getPictureUrl(e){if(!e||!e.profilePicture)return"";if(!e.profilePicture.displayImageReference||!e.profilePicture.displayImageReference.vectorImage)return"";let t="";var a=e.profilePicture.displayImageReference.vectorImage;for(let e=0;e<a.artifacts.length;e++)if(100===a.artifacts[e].width){t=a.artifacts[e].fileIdentifyingUrlPathSegment;break}return!t&&a.artifacts&&0<a.artifacts.length&&(t=a.artifacts[0].fileIdentifyingUrlPathSegment),t=a.rootUrl&&-1===t.indexOf("https")?a.rootUrl+t:t}getPictureUrlV2(e){if(!e||!e.vectorImage)return"";let t="";var a=e.vectorImage;for(let e=0;e<a.artifacts.length;e++)if(100===a.artifacts[e].width){t=convertHtmlToText(a.artifacts[e].fileIdentifyingUrlPathSegment);break}return!t&&a.artifacts&&0<a.artifacts.length&&(t=convertHtmlToText(a.artifacts[0].fileIdentifyingUrlPathSegment)),t=a.rootUrl&&-1===t.indexOf("https")?a.rootUrl+t:t}getPeopleLinksExt(e,t){for(const i of e){var a,r;i.source_id_2&&(this.data_=[],a=this.getOneByKey("publicIdentifier",t,i.source_id_2))&&((r=this.getPictureUrl(a))&&(i.logo=r),a.firstName&&(i.firstName=a.firstName),a.lastName)&&(i.lastName=a.lastName)}return e}getOneByKey(e,t,a){for(var r in t)r===e&&t[r]===a?this.data_=t:"object"!=typeof t[r]&&"array"!=typeof t[r]||this.getOneByKey(e,t[r],a);return this.data_}}